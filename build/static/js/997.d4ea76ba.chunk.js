"use strict";(self.webpackChunkclient_shop=self.webpackChunkclient_shop||[]).push([[997],{1828:function(e,t,s){var n=s(9566),r={getCarts:function(e,t){var s="/carts/fetch".concat(e);return n.Z.get(s,{headers:{Authorization:"Bearer ".concat(t)}})},postAddToCart:function(e,t){var s="/carts/add".concat(e);return console.log(s),n.Z.post(s,{},{headers:{Authorization:"Bearer ".concat(t)}})},deleteToCart:function(e,t){var s="/carts/delete".concat(e);return n.Z.post(s,{},{headers:{Authorization:"Bearer ".concat(t)}})},putToCart:function(e,t){var s="/carts/update".concat(e);return n.Z.post(s,{},{headers:{Authorization:"Bearer ".concat(t)}})}};t.Z=r},1959:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var n=s(8214),r=s(5861),a=s(885),c=s(2791),i=s(6789),o=s(6969),l=s(1523),d=s(7186),u=s(184);function m(e){var t=e.listCart,s=e.onDeleteCart,n=e.onUpdateCount,r=localStorage.getItem("id_user"),a=function(e){console.log(e.target.value)};return(0,u.jsx)("div",{className:"table-responsive mb-4",children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{className:"bg-light",children:(0,u.jsxs)("tr",{className:"text-center",children:[(0,u.jsxs)("th",{className:"border-0",scope:"col",children:[" ",(0,u.jsx)("strong",{className:"text-small text-uppercase",children:"H\xecnh \u1ea2nh"})]}),(0,u.jsxs)("th",{className:"border-0",scope:"col",children:[" ",(0,u.jsx)("strong",{className:"text-small text-uppercase",children:"T\xean S\u1ea3n Ph\u1ea9m"})]}),(0,u.jsxs)("th",{className:"border-0",scope:"col",children:[" ",(0,u.jsx)("strong",{className:"text-small text-uppercase",children:"Gi\xe1"})]}),(0,u.jsxs)("th",{className:"border-0",scope:"col",children:[" ",(0,u.jsx)("strong",{className:"text-small text-uppercase",children:"S\u1ed1 L\u01b0\u1ee3ng"})]}),(0,u.jsxs)("th",{className:"border-0",scope:"col",children:[" ",(0,u.jsx)("strong",{className:"text-small text-uppercase",children:"T\u1ed5ng Thanh To\xe1n"})]}),(0,u.jsxs)("th",{className:"border-0",scope:"col",children:[" ",(0,u.jsx)("strong",{className:"text-small text-uppercase",children:"X\xf3a"})]})]})}),(0,u.jsx)("tbody",{children:t&&t.map((function(e){return(0,u.jsxs)("tr",{className:"text-center",children:[(0,u.jsx)("td",{className:"pl-0 border-0",children:(0,u.jsx)("div",{className:"media align-items-center justify-content-center",children:(0,u.jsx)(l.rU,{className:"reset-anchor d-block animsition-link",to:"/detail/".concat(e.productId._id),children:(0,u.jsx)("img",{src:e.productId.img1,alt:"...",width:"70"})})})}),(0,u.jsx)("td",{className:"align-middle border-0",children:(0,u.jsx)("div",{className:"media align-items-center justify-content-center",children:(0,u.jsx)(l.rU,{className:"reset-anchor h6 animsition-link",to:"/detail/".concat(e.productId._id),children:e.productId.name})})}),(0,u.jsx)("td",{className:"align-middle border-0",children:(0,u.jsxs)("p",{className:"mb-0 small",children:[(0,d.Z)(e.productId.price)," VND"]})}),(0,u.jsx)("td",{className:"align-middle border-0",children:(0,u.jsxs)("div",{className:"quantity justify-content-center",children:[(0,u.jsx)("button",{className:"dec-btn p-0",style:{cursor:"pointer"},onClick:function(){return function(e,t,s){if(n&&1!==s){var r=parseInt(s)-1;n(e,t,r)}}(r,e.productId._id,e.quantity)},children:(0,u.jsx)("i",{className:"fas fa-caret-left"})}),(0,u.jsx)("input",{className:"form-control form-control-sm border-0 shadow-0 p-0",type:"text",value:e.quantity,onChange:a}),(0,u.jsx)("button",{className:"inc-btn p-0",style:{cursor:"pointer"},onClick:function(){return function(e,t,s){if(n){var r=parseInt(s)+1;n(e,t,r)}}(r,e.productId._id,e.quantity)},children:(0,u.jsx)("i",{className:"fas fa-caret-right"})})]})}),(0,u.jsx)("td",{className:"align-middle border-0",children:(0,u.jsxs)("p",{className:"mb-0 small",children:[(0,d.Z)(parseInt(e.productId.price)*parseInt(e.quantity))," ","VND"]})}),(0,u.jsx)("td",{className:"align-middle border-0",children:(0,u.jsx)("a",{className:"reset-anchor remove_cart",style:{cursor:"pointer"},onClick:function(){return t=r,n=e.productId._id,void(s&&s(t,n));var t,n},children:(0,u.jsx)("i",{className:"fas fa-trash-alt small text-muted"})})})]},e._id)}))})]})})}m.defaultProps={listCart:[],onDeleteCart:null,onUpdateCount:null};var p=m,h=s(4426),x=s.n(h),g=s(9271),f=s(1828),j=s(4245),b=s(6528);var N=function(e){var t=localStorage.getItem("token"),s=((0,i.v9)((function(e){return e.Cart.id_user})),(0,i.v9)((function(e){return e.Cart.listCart}))),m=(0,c.useState)(),h=(0,a.Z)(m,2),N=h[0],v=h[1],I=(0,c.useState)(),y=(0,a.Z)(I,2),C=y[0],Z=y[1],T=localStorage.getItem("expiryDate"),w=new Date(T).getTime()-(new Date).getTime();setTimeout((function(){localStorage.clear(),window.location.replace("/signin")}),w);var _=(0,i.I0)(),k=(0,c.useState)({idProduct:"",count:""}),S=(0,a.Z)(k,2),D=S[0],H=S[1],U=(0,c.useState)(!1),B=(0,a.Z)(U,2),P=B[0],q=B[1];function V(e){var t=0;e.map((function(e){return t+=parseInt(e.productId.price)*parseInt(e.quantity)}));Z(t)}(0,c.useEffect)((function(){localStorage.getItem("id_user")||(v(s),V(s))}),[D]),(0,c.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var s,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("id_user")){e.next=8;break}return s={userId:localStorage.getItem("id_user")},r="?"+j.stringify(s),e.next=5,f.Z.getCarts(r,t);case 5:a=e.sent,v(a),V(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),q(!1)}),[P]);var A=(0,c.useState)(!1),G=(0,a.Z)(A,2),L=G[0],z=G[1];return console.log(N),(0,u.jsxs)("div",{className:"container",children:[(0,u.jsx)("section",{className:"hero pb-3 bg-cover bg-center d-flex align-items-center",style:{backgroundImage:"url(".concat(b.Z.banner,")")},children:(0,u.jsx)("div",{className:"container py-5",children:(0,u.jsx)("div",{className:"row px-4 px-lg-5",children:(0,u.jsxs)("div",{className:"col-lg-6",children:[(0,u.jsx)("h1",{className:"h2 text-uppercase mb-0",children:"Gi\u1ecf H\xe0ng"}),(0,u.jsx)("p",{className:"text-muted text-uppercase mb-2",children:"M\u1ed9t v\xe0i b\u01b0\u1edbc n\u1eefa th\xf4i v\xe0 b\u1ea1n s\u1ebd s\u1edf h\u1eefu s\u1ea3n ph\u1ea9m"})]})})})}),(0,u.jsxs)("section",{className:"py-5",children:[(0,u.jsx)("h2",{className:"h5 text-uppercase mb-4",children:"Gi\u1ecf H\xe0ng"}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-lg-8 mb-4 mb-lg-0",children:[(0,u.jsx)(p,{listCart:N,onDeleteCart:function(e,s){if(console.log("idUser: "+e+", idProduct: "+s),localStorage.getItem("id_user")){var a=function(){var a=(0,r.Z)((0,n.Z)().mark((function r(){var a,c,i;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={userId:e,productId:s},c="?"+j.stringify(a),n.next=4,f.Z.deleteToCart(c,t);case 4:i=n.sent,console.log(i);case 6:case"end":return n.stop()}}),r)})));return function(){return a.apply(this,arguments)}}();a(),q(!0),x().set("notifier","position","bottom-left"),x().success("B\u1ea1n \u0110\xe3 X\xf3a H\xe0ng Th\xe0nh C\xf4ng!")}else{var c={idProduct:s,idUser:e},i=(0,o.al)(c);_(i),x().set("notifier","position","bottom-left"),x().success("B\u1ea1n \u0110\xe3 X\xf3a H\xe0ng Th\xe0nh C\xf4ng!"),H({idProduct:s,count:""})}},onUpdateCount:function(e,s,a){if(console.log("Count: "+a+", idUser: "+e+", idProduct: "+s),localStorage.getItem("id_user")){var c=function(){var c=(0,r.Z)((0,n.Z)().mark((function r(){var c,i,o;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={userId:e,productId:s,count:a},i="?"+j.stringify(c),n.next=4,f.Z.putToCart(i,t);case 4:o=n.sent,console.log(o);case 6:case"end":return n.stop()}}),r)})));return function(){return c.apply(this,arguments)}}();c(),q(!0),console.log("Ban Da Dang Nhap!"),x().set("notifier","position","bottom-left"),x().success("B\u1ea1n \u0110\xe3 S\u1eeda H\xe0ng Th\xe0nh C\xf4ng!")}else{var i={idProduct:s,idUser:e,count:a},l=(0,o.xu)(i);_(l),x().set("notifier","position","bottom-left"),x().success("B\u1ea1n \u0110\xe3 S\u1eeda H\xe0ng Th\xe0nh C\xf4ng!"),H({idProduct:s,count:a})}}}),(0,u.jsx)("div",{className:"bg-light px-4 py-3",children:(0,u.jsxs)("div",{className:"row align-items-center text-center",children:[(0,u.jsx)("div",{className:"col-md-6 mb-3 mb-md-0 text-md-left",children:(0,u.jsxs)(l.rU,{className:"btn btn-link p-0 text-dark btn-sm",to:"/shop",children:[(0,u.jsx)("i",{className:"fas fa-long-arrow-alt-left mr-2",children:" "}),"Ti\u1ebfp T\u1ee5c Mua S\u1eafm"]})}),(0,u.jsxs)("div",{className:"col-md-6 text-md-right",children:[L&&(0,u.jsx)(g.l_,{to:"/checkout"}),(0,u.jsxs)("span",{className:"btn btn-outline-dark btn-sm",onClick:function(){return localStorage.getItem("id_user")?0===N.length?(x().set("notifier","position","bottom-left"),void x().error("Vui L\xf2ng Ki\u1ec3m Tra L\u1ea1i Gi\u1ecf H\xe0ng!")):void z(!0):(x().set("notifier","position","bottom-left"),void x().error("Vui L\xf2ng Ki\u1ec3m Tra L\u1ea1i \u0110\u0103ng Nh\u1eadp!"))},children:["Ti\u1ebfn H\xe0nh Thanh To\xe1n",(0,u.jsx)("i",{className:"fas fa-long-arrow-alt-right ml-2"})]})]})]})})]}),(0,u.jsx)("div",{className:"col-lg-4",children:(0,u.jsx)("div",{className:"card border-0 rounded-0 p-lg-4 bg-light",children:(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("h5",{className:"text-uppercase mb-4",children:"Gi\xe1 Tr\u1ecb \u0110\u01a1n H\xe0ng"}),(0,u.jsxs)("ul",{className:"list-unstyled mb-0",children:[N&&N.map((function(e){return(0,u.jsxs)("li",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,u.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:e.productId.name}),(0,u.jsxs)("span",{className:"text-muted small",children:[e.productId.price," VND x ",e.quantity]})]})})),(0,u.jsx)("li",{className:"border-bottom my-2"}),(0,u.jsxs)("li",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,u.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:"T\u1ed5ng Ti\u1ec1n"}),(0,u.jsxs)("span",{children:[(0,d.Z)(C)," VND"]})]})]})]})})})]})]})]})}},6528:function(e,t,s){s.d(t,{Z:function(){return n}});var n={banner:s.p+"static/media/banner1.4a22881c941f7b645fa8.jpg",img1:s.p+"static/media/product_1.b24c110a233df54143c8.png",img2:s.p+"static/media/product_2.1bc52f8922d488cead68.png",img3:s.p+"static/media/product_3.48eda5293a6f605e73f7.png",img4:s.p+"static/media/product_4.6d83c6007d5109b357a8.png",img5:s.p+"static/media/product_5.b963def7555b7544d220.png"}},7186:function(e,t,s){function n(e){for(var t=e+"",s="",n=0,r=t.length-1;r>=0;r--)n++,s=t[r]+s,n%3===0&&0!==r&&(s="."+s,n=0);return s}s.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=997.d4ea76ba.chunk.js.map