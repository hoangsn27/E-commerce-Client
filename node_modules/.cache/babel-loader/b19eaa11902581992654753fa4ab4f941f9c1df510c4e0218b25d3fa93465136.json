{"ast":null,"code":"import React,{useEffect}from\"react\";import{Route,Switch}from\"react-router-dom\";import DetailHistory from\"./Component/DetailHistory\";import MainHistory from\"./Component/MainHistory\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function History(props){// select expiryDate to check token is still valid\nvar expiryDate=localStorage.getItem(\"expiryDate\");var timeRemaining=new Date(expiryDate).getTime()-new Date().getTime();useEffect(function(){if(!expiryDate){return window.location.replace(\"/signin\");}// auto logout when expirydate token\nvar autoLogout=function autoLogout(miliseconds){setTimeout(function(){localStorage.clear();window.location.replace(\"/signin\");},miliseconds);};autoLogout(timeRemaining);},[timeRemaining]);return/*#__PURE__*/_jsxs(Switch,{children:[expiryDate&&/*#__PURE__*/_jsx(Route,{exact:true,path:\"/history\",component:MainHistory}),expiryDate&&/*#__PURE__*/_jsx(Route,{path:\"/history/:id\",component:DetailHistory})]});}export default History;","map":{"version":3,"names":["React","useEffect","Route","Switch","DetailHistory","MainHistory","jsx","_jsx","jsxs","_jsxs","History","props","expiryDate","localStorage","getItem","timeRemaining","Date","getTime","window","location","replace","autoLogout","miliseconds","setTimeout","clear","children","exact","path","component"],"sources":["E:/do an tot nghiep/push github asm3/client/src/History/History.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport DetailHistory from \"./Component/DetailHistory\";\nimport MainHistory from \"./Component/MainHistory\";\n\nfunction History(props) {\n  // select expiryDate to check token is still valid\n  const expiryDate = localStorage.getItem(\"expiryDate\");\n  const timeRemaining = new Date(expiryDate).getTime() - new Date().getTime();\n\n  useEffect(() => {\n    if (!expiryDate) {\n      return window.location.replace(\"/signin\");\n    }\n\n    // auto logout when expirydate token\n    const autoLogout = (miliseconds) => {\n      setTimeout(() => {\n        localStorage.clear();\n        window.location.replace(\"/signin\");\n      }, miliseconds);\n    };\n\n    autoLogout(timeRemaining);\n  }, [timeRemaining]);\n\n  return (\n    <Switch>\n      {expiryDate && <Route exact path=\"/history\" component={MainHistory} />}\n\n      {expiryDate && <Route path=\"/history/:id\" component={DetailHistory} />}\n    </Switch>\n  );\n}\n\nexport default History;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,KAAK,CAAEC,MAAM,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,aAAa,KAAM,2BAA2B,CACrD,MAAO,CAAAC,WAAW,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElD,QAAS,CAAAC,OAAOA,CAACC,KAAK,CAAE,CACtB;AACA,GAAM,CAAAC,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CACrD,GAAM,CAAAC,aAAa,CAAG,GAAI,CAAAC,IAAI,CAACJ,UAAU,CAAC,CAACK,OAAO,CAAC,CAAC,CAAG,GAAI,CAAAD,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAE3EhB,SAAS,CAAC,UAAM,CACd,GAAI,CAACW,UAAU,CAAE,CACf,MAAO,CAAAM,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAC,CAC3C,CAEA;AACA,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,WAAW,CAAK,CAClCC,UAAU,CAAC,UAAM,CACfV,YAAY,CAACW,KAAK,CAAC,CAAC,CACpBN,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,SAAS,CAAC,CACpC,CAAC,CAAEE,WAAW,CAAC,CACjB,CAAC,CAEDD,UAAU,CAACN,aAAa,CAAC,CAC3B,CAAC,CAAE,CAACA,aAAa,CAAC,CAAC,CAEnB,mBACEN,KAAA,CAACN,MAAM,EAAAsB,QAAA,EACJb,UAAU,eAAIL,IAAA,CAACL,KAAK,EAACwB,KAAK,MAACC,IAAI,CAAC,UAAU,CAACC,SAAS,CAAEvB,WAAY,CAAE,CAAC,CAErEO,UAAU,eAAIL,IAAA,CAACL,KAAK,EAACyB,IAAI,CAAC,cAAc,CAACC,SAAS,CAAExB,aAAc,CAAE,CAAC,EAChE,CAAC,CAEb,CAEA,cAAe,CAAAM,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}